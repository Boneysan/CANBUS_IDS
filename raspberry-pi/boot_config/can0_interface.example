# CAN Interface Configuration Example
# Copy to /etc/network/interfaces.d/can0

# ==================================
# Persistent CAN0 Interface Configuration
# ==================================

# Automatically bring up CAN interface on boot
auto can0

# Manual configuration (no IP address needed for CAN)
iface can0 inet manual
    # Set CAN bitrate before bringing up interface
    # Common automotive bitrates: 125000, 250000, 500000, 1000000
    pre-up /sbin/ip link set can0 type can bitrate 500000
    
    # Optional: Set restart delay for error recovery
    pre-up /sbin/ip link set can0 type can restart-ms 100
    
    # Bring up interface
    up /sbin/ifconfig can0 up
    
    # Bring down interface on shutdown
    down /sbin/ifconfig can0 down

# ==================================
# Alternative: Using systemd-networkd
# ==================================
# If using systemd-networkd instead, create:
# /etc/systemd/network/80-can.network
#
# [Match]
# Name=can0
#
# [CAN]
# BitRate=500000
# RestartSec=100ms

# ==================================
# CAN1 Configuration (if dual CAN)
# ==================================

#auto can1
#iface can1 inet manual
#    pre-up /sbin/ip link set can1 type can bitrate 500000
#    pre-up /sbin/ip link set can1 type can restart-ms 100
#    up /sbin/ifconfig can1 up
#    down /sbin/ifconfig can1 down

# ==================================
# Virtual CAN Interface (for testing)
# ==================================

#auto vcan0
#iface vcan0 inet manual
#    pre-up /sbin/ip link add dev vcan0 type vcan
#    up /sbin/ifconfig vcan0 up
#    down /sbin/ifconfig vcan0 down
#    post-down /sbin/ip link del vcan0